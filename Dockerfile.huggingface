FROM openjdk:17-jdk-slim

WORKDIR /app

# Copy the jar file (built in GitHub Actions)
COPY target/*.jar app.jar

# Expose port 7860 (required by Hugging Face Spaces)
EXPOSE 7860

# Set environment variables
ENV SERVER_PORT=7860
ENV SPRING_PROFILES_ACTIVE=prod

# Run the application
ENTRYPOINT ["java", "-Dserver.address=0.0.0.0", "-Dserver.port=7860", "-jar", "/app/app.jar"]
